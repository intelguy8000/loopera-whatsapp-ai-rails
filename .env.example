# ============================================
# Loopera WhatsApp AI Bot - Variables de Entorno
# ============================================
# Copia este archivo como .env y completa los valores
# En Railway, configurar en Settings > Variables

# --------------------------------------------
# WEBHOOK VERIFICATION (Obligatorio)
# --------------------------------------------
# Token para verificar el webhook con Meta
# Debe coincidir EXACTAMENTE con el configurado en Meta Developers
# Puede ser cualquier string seguro
VERIFY_TOKEN=loopera-verify-2024

# --------------------------------------------
# WHATSAPP CLOUD API (Obligatorio)
# --------------------------------------------
# Token de acceso de Meta
# IMPORTANTE: Usar System User para token permanente (no expira)
# Tokens temporales expiran cada 24 horas
# Obtener en: Meta Business Settings > System Users > Generate Token
# Permisos necesarios: whatsapp_business_messaging, whatsapp_business_management
WHATSAPP_TOKEN=EAAG...

# App Secret desde Meta Developers > App Settings > Basic
# Usado para validar firmas de webhook (seguridad)
APP_SECRET=abc123...

# CRITICO: Este es el Phone Number ID, NO el WABA ID
# - WABA ID: Para suscripciones /subscribed_apps (ej: 1282258597052951)
# - Phone Number ID: Para enviar mensajes (ej: 949507764911133)
# Lo encuentras en: Meta Business > WhatsApp > Phone Numbers
# Error comun: usar WABA ID causa "Object does not exist"
PHONE_NUMBER_ID=949507764911133

# --------------------------------------------
# GROQ API (Obligatorio)
# --------------------------------------------
# API Key desde console.groq.com
# Usado para:
# - LLM: llama-3.3-70b-versatile (chat principal)
# - STT: whisper-large-v3-turbo (transcripcion de audio)
# - TTS: playai-tts (voz en ingles, requiere aceptar terminos)
# - Vision: meta-llama/llama-4-scout-17b-16e-instruct (analisis de imagenes)
GROQ_API_KEY=gsk_...

# --------------------------------------------
# GOOGLE CLOUD TTS (Obligatorio para TTS en espanol)
# --------------------------------------------
# Credenciales de Service Account en formato JSON
# Pasos para obtener:
# 1. Crear proyecto en Google Cloud Console
# 2. Habilitar API Text-to-Speech
# 3. IAM > Service Accounts > Create
# 4. Asignar rol: Cloud Text-to-Speech API User (o Owner)
# 5. Keys > Add Key > Create new key > JSON
# 6. Copiar contenido JSON completo y minificar (una linea)
# 7. Pegar aqui sin comillas externas
#
# Ejemplo (minificado):
# GOOGLE_APPLICATION_CREDENTIALS_JSON={"type":"service_account","project_id":"mi-proyecto",...}
#
# Voz configurada: es-US-Wavenet-B (espanol latino, femenina)
GOOGLE_APPLICATION_CREDENTIALS_JSON={"type":"service_account","project_id":"..."}

# --------------------------------------------
# REDIS (Obligatorio para memoria conversacional)
# --------------------------------------------
# Railway provee REDIS_URL automaticamente si agregas el addon Redis
# Si no hay Redis, el bot funciona pero sin memoria de conversaciones
# Configuracion:
# - Ultimos 20 mensajes por usuario
# - Expira en 24 horas (86400 segundos)
REDIS_URL=redis://localhost:6379

# --------------------------------------------
# NOTAS IMPORTANTES
# --------------------------------------------
# 1. No commitear este archivo con valores reales (.gitignore lo excluye)
# 2. En Railway: Settings > Variables > agregar cada variable
# 3. El token de System User NUNCA expira (a diferencia de tokens temporales)
# 4. Para PlayAI TTS: visitar https://console.groq.com/playground?model=playai-tts
#    y aceptar los terminos antes de usar
# 5. Despues de verificar webhook, ejecutar POST a /subscribed_apps
#    (Shadow Delivery Problem - ver TROUBLESHOOTING.md)
# 6. Phone Number ID != WABA ID (error muy comun)
